javascript:(function(){"use strict";if(document.getElementById("toc-panel")||document.getElementById("toc-handle"))return;let e=80,t=document.createElement("style");t.textContent="#toc-panel{position:fixed;top:0;right:0;width:280px;height:100%;background:#fafafa;box-shadow:-4px 0 8px rgba(0,0,0,.1);font-family:sans-serif;font-size:.8rem;border-left:1px solid #ddd;display:flex;flex-direction:column;z-index:9998;transform:translateX(0);transition:transform .3s ease}#toc-panel.collapsed{transform:translateX(280px)}#toc-header{padding:6px 10px;background:#ddd;border-bottom:1px solid #ccc;font-weight:bold;flex-shrink:0;display:flex;justify-content:space-between;align-items:center}#toc-controls button{margin-left:4px;font-size:0.9rem;padding:2px 6px;cursor:pointer}#toc-list{list-style:none;flex:1;overflow-y:auto;margin:0;padding:6px}#toc-list li{padding:4px;cursor:pointer;border-radius:3px;transition:background-color .2s}#toc-list li:hover{background:#f0f0f0}#toc-list ul{margin-left:16px;padding:0}#toc-list ul li::before{content:\"\"}#toc-handle{position:fixed;top:50%;right:0;transform:translateY(-50%);width:30px;height:80px;background:#ccc;display:flex;align-items:center;justify-content:center;writing-mode:vertical-rl;text-orientation:mixed;cursor:pointer;font-weight:bold;user-select:none;z-index:9999;transition:background .2s}#toc-handle:hover{background:#bbb}@keyframes highlightFade{0%{background-color:#fffa99}100%{background-color:transparent}}.toc-highlight{animation:highlightFade 1.5s forwards}@media (prefers-color-scheme:dark){#toc-panel{background:#333;border-left:1px solid #555;box-shadow:-4px 0 8px rgba(0,0,0,.7)}#toc-header{background:#555;border-bottom:1px solid #666;color:#eee}#toc-list li:hover{background:#444}#toc-list{color:#eee}#toc-handle{background:#555;color:#ddd}#toc-handle:hover{background:#666}}",document.head.appendChild(t);var n=document.createElement("div");n.id="toc-panel",n.innerHTML='<div id="toc-header"><span>Grok Conversation TOC</span><span id="toc-controls"><button id="decLen">↓</button><button id="incLen">↑</button></span></div><ul id="toc-list"></ul>',document.body.appendChild(n);var d=document.createElement("div");d.id="toc-handle",d.textContent="TOC",document.body.appendChild(d);var a=null,l=null,r=!1,o=null;function c(){r||(r=!0,o=setTimeout(function(){s(),r=!1},300))}function s(){var t=document.getElementById("toc-list");if(!t)return;t.innerHTML="";var n=(a||document).querySelectorAll(".message, .chat-message, div[class*='message'], div[class*='turn']");if(!n||0===n.length)return void(t.innerHTML='<li style="opacity:0.7;font-style:italic;">No messages found</li>');for(var d=0;d<n.length;d++){var r=n[d],o=document.createElement("li"),i=r.querySelector(".bot, .ai, [class*='bot'], [class*='ai']"),m=r.textContent.trim(),u=m.substring(0,e)+(m.length>e?"...":"");o.textContent="Turn "+(d+1)+(i?" (Grok): ":" (You): ")+u,function(e){o.addEventListener("click",function(){e.scrollIntoView({behavior:"smooth",block:"start"})})}(r),t.appendChild(o)}}function i(){var e=document.querySelector("main, .chat-container, [class*='conversation'], [class*='chat']")||document.body;e!==a&&(a=e,l&&(l.disconnect(),l=null),a&&(l=new MutationObserver(function(){c()}),l.observe(a,{childList:!0,subtree:!0}),s()))}i();setInterval(i,2e3),d.addEventListener("click",function(){n.classList.toggle("collapsed")}),document.getElementById("decLen").addEventListener("click",function(){e=Math.max(10,e-20),s()}),document.getElementById("incLen").addEventListener("click",function(){e=Math.min(500,e+20),s()})})();
